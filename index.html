<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Job Search Portal</title>
  <style>
    :root {
      --bg: #0f1724;
      --sidebar: #111827;
      --card: #1e293b;
      --accent: #06b6d4;
      --accent2: #7c3aed;
      --muted: #94a3b8;
      --text: #f1f5f9;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Inter", system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .app-container {
      display: grid;
      grid-template-columns: 320px 1fr;
      flex: 1;
    }
    .sidebar {
      background: var(--sidebar);
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .main {
      padding: 28px;
      background: linear-gradient(180deg, #0f172a, #1e293b);
    }
    .brand { text-align: center; margin-bottom: 12px; }
    .logo {
      width: 60px; height: 60px; border-radius: 16px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 20px; margin: 0 auto 8px;
    }
    .brand h1 { margin: 0; font-size: 18px; }
    .tagline { color: var(--muted); font-size: 13px; }
    .card {
      background: var(--card); padding: 16px; border-radius: 12px;
      box-shadow: 0 6px 18px rgba(2, 6, 23, 0.6);
    }
    .card h2 { margin-top: 0; font-size: 16px; }
    textarea, input[type="text"], input[type="range"], input[type="file"] {
      width: 100%; margin-top: 10px; padding: 10px; border-radius: 8px;
      border: none; background: #0f172a; color: var(--text); font-size: 14px;
    }
    textarea { min-height: 100px; resize: vertical; }
    input[type="range"] { cursor: pointer; }
    input::file-selector-button {
      background: var(--accent); border: none; padding: 6px 10px;
      border-radius: 6px; font-weight: 600; cursor: pointer; margin-right: 8px;
    }
    .btn {
      padding: 8px 14px; border-radius: 8px; border: none;
      background: var(--accent); color: #042028; font-weight: 600;
      cursor: pointer; transition: 0.2s;
    }
    .btn:hover { transform: scale(1.05); }
    .btn.alt { background: #334155; color: var(--text); }
    .btn.csv { background: #2dd4bf; }
    .skills { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
    .chip {
      padding: 6px 10px; border-radius: 999px;
      background: rgba(255,255,255,0.08); font-size: 12px; color: var(--muted);
    }
    .main-header { display: flex; justify-content: space-between; align-items: center; }
    .header-actions { display: flex; gap: 10px; }
    .search-row { display: flex; gap: 10px; margin: 20px 0; }
    .search-row input[type="text"] { flex: 1; }
    .job-list { display: flex; flex-direction: column; gap: 14px; }
    .job {
      background: var(--card); border-radius: 12px; padding: 16px;
      display: flex; justify-content: space-between; align-items: flex-start;
      transition: 0.25s;
    }
    .job:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
    .job h3 { margin: 0; font-size: 16px; }
    .job .meta { max-width: 70%; }
    .result-score {
      background: rgba(255,255,255,0.08); padding: 6px 12px;
      border-radius: 8px; font-weight: 700;
    }
    footer {
      text-align: center; padding: 14px; font-size: 13px;
      color: var(--muted); background: #0b1220; margin-top: auto;
    }
    @media (max-width: 880px) {
      .app-container { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">AI</div>
        <h1>Job Search Portal</h1>
        <p class="tagline">AI-powered career match</p>
      </div>
      <section class="card">
        <h2>Your Resume</h2>
        <input id="fileInput" type="file" accept=".txt" />
        <textarea id="resumeText" placeholder="Paste your resume or type your skills..."></textarea>
        <div class="actions" style="margin-top:10px;display:flex;gap:10px;">
          <button id="extract" class="btn">Extract Skills</button>
          <button id="clear" class="btn alt">Clear</button>
        </div>
        <p class="small">Detected skills: <span id="skillCount">0</span></p>
        <div id="skillCloud" class="skills"></div>
      </section>
      <section class="card">
        <h2>Preferences</h2>
        <label class="small">Minimum match %</label>
        <input id="minMatch" type="range" min="0" max="100" value="40" />
      </section>
    </aside>
    <!-- Main -->
    <main class="main">
      <header class="main-header">
        <div>
          <h2>Recommended Jobs</h2>
          <p class="small">Ranked by resume-job match (demo dataset)</p>
        </div>
        <div class="header-actions">
          <button id="refresh" class="btn">Re-rank</button>
          <button id="downloadCSV" class="btn csv">Export CSV</button>
        </div>
      </header>
      <div class="search-row">
        <input id="search" type="text" placeholder="Filter by title or company" />
        <input id="jobsUpload" type="file" accept="application/json" />
      </div>
      <div id="jobList" class="job-list"></div>
    </main>
  </div>
  <footer>© 2025 AI Job Search Portal — Demo for Presentation</footer>
  <script>
    const sampleJobs = [
      {id:1,title:'Junior Web Developer',company:'TechWorks',skills:['javascript','html','css'],location:'Remote',desc:'Build web pages using HTML/CSS and JS.'},
      {id:2,title:'Data Analyst',company:'Insight Labs',skills:['sql','excel','python','statistics'],location:'Hyderabad',desc:'Analyze datasets and produce reports.'},
      {id:3,title:'Machine Learning Intern',company:'AI Labs',skills:['python','pandas','numpy','ml'],location:'Bangalore',desc:'Work on ML models like classification.'},
      {id:4,title:'Product Manager - Associate',company:'Prodify',skills:['communication','product','roadmap','stakeholder'],location:'Chennai',desc:'Assist in building product features.'},
      {id:5,title:'Backend Developer (Node)',company:'DevHouse',skills:['nodejs','express','mongodb','api'],location:'Remote',desc:'Build REST APIs and backend systems.'}
    ];
    const normalize = t => (t||'').toLowerCase().replace(/[^a-z0-9\\s]/g,' ');
    const tokenize = t => normalize(t).split(/\\s+/).filter(Boolean);
    const stopwords = new Set(['and','or','with','the','a','an','in','on','for','to','of','experience','knowledge','skills','working','using','familiar']);
    function extractSkills(text){
      const tokens = tokenize(text), freq = {};
      tokens.forEach(t=>{ if(t.length>1 && !stopwords.has(t) && isNaN(Number(t))){ freq[t]=(freq[t]||0)+1 }});
      const techKeywords = ['javascript','html','css','python','sql','java','c','c++','node','nodejs','react','angular','vue','mongodb','mysql','excel','pandas','numpy','ml','machine','learning','api','aws','azure','docker','kubernetes','git','linux','communication','product'];
      const candidates = Object.keys(freq).sort((a,b)=>freq[b]-freq[a]);
      const chosen = new Set(); techKeywords.forEach(k=>{ if(freq[k]) chosen.add(k) });
      for(let i=0;i<candidates.length && chosen.size<12;i++) chosen.add(candidates[i]);
      return Array.from(chosen).slice(0,12);
    }
    function scoreJob(job, resumeSkills, resumeText){
      const sSet = new Set(resumeSkills.map(x=>x.toLowerCase()));
      const jobSkills = job.skills.map(x=>x.toLowerCase());
      let matchCount = 0; jobSkills.forEach(js=>{ if(sSet.has(js)||resumeText.includes(js)) matchCount++; });
      const skillScore = jobSkills.length?(matchCount/jobSkills.length):0;
      const titleDesc = normalize(job.title+' '+job.desc);
      let bonus = 0; resumeSkills.forEach(sk=>{ if(titleDesc.includes(sk.toLowerCase())) bonus+=0.05 });
      return Math.min(100, Math.round((skillScore+bonus)*100));
    }
    const resumeText = document.getElementById('resumeText');
    const extractBtn = document.getElementById('extract');
    const clearBtn = document.getElementById('clear');
    const skillCloud = document.getElementById('skillCloud');
    const skillCount = document.getElementById('skillCount');
    const jobList = document.getElementById('jobList');
    const minMatch = document.getElementById('minMatch');
    const refresh = document.getElementById('refresh');
    const search = document.getElementById('search');
    const downloadCSV = document.getElementById('downloadCSV');
    const fileInput = document.getElementById('fileInput');
    const jobsUpload = document.getElementById('jobsUpload');
    let jobs = sampleJobs.slice(), skills=[];
    function renderSkills(sk){ skillCloud.innerHTML=''; sk.forEach(s=>{const el=document.createElement('div');el.className='chip';el.textContent=s;skillCloud.appendChild(el)}); skillCount.textContent=sk.length; }
    function renderJobs(){
      const txt = normalize(resumeText.value); const min = Number(minMatch.value);
      const q = (search.value||'').trim().toLowerCase();
      const scored = jobs.map(j=>({...j,score:scoreJob(j,skills,txt)}));
      const filtered = scored.filter(j=>j.score>=min && (j.title.toLowerCase().includes(q)||j.company.toLowerCase().includes(q)||q===''));
      filtered.sort((a,b)=>b.score-a.score); jobList.innerHTML='';
      if(filtered.length===0){ jobList.innerHTML='<div class="small">No jobs found — adjust filters or update resume.</div>'; return; }
      filtered.forEach(j=>{
        const el=document.createElement('div');el.className='job';
        const meta=document.createElement('div');meta.className='meta';
        meta.innerHTML=`<h3>${j.title} — ${j.company}</h3><div class="small">${j.location} • ${j.desc}</div>`;
        const skillsWrap=document.createElement('div');skillsWrap.className='skills';
        j.skills.forEach(sk=>{const c=document.createElement('div');c.className='chip';c.textContent=sk;skillsWrap.appendChild(c)});
        meta.appendChild(skillsWrap);
        const score=document.createElement('div');score.className='result-score';score.textContent=`${j.score}% match`;
        el.appendChild(meta);el.appendChild(score); jobList.appendChild(el);
      });
    }
    extractBtn.addEventListener('click',()=>{ if(!resumeText.value.trim()){alert('Paste resume text or upload a .txt file first.');return;} skills=extractSkills(resumeText.value);renderSkills(skills);renderJobs();});
    clearBtn.addEventListener('click',()=>{resumeText.value='';skills=[];renderSkills(skills);renderJobs();});
    minMatch.addEventListener('input',renderJobs); search.addEventListener('input',renderJobs); refresh.addEventListener('click',renderJobs);
    fileInput.addEventListener('change',async e=>{const f=e.target.files[0];if(!f)return;if(!f.name.endsWith('.txt')){alert('Only .txt resumes supported.');return;}const txt=await f.text();resumeText.value=txt;skills=extractSkills(txt);renderSkills(skills);renderJobs();});
    jobsUpload.addEventListener('change',async e=>{const f=e.target.files[0];if(!f)return;try{const parsed=JSON.parse(await f.text());if(Array.isArray(parsed)){jobs=parsed;renderJobs();}else alert('JSON must be an array of job objects');}catch{alert('Invalid JSON file');}});
    downloadCSV.addEventListener('click',()=>{const rows=[['id','title','company','location','score','skills','desc']];const txt=normalize(resumeText.value);const min=Number(minMatch.value);jobs.map(j=>({...j,score:scoreJob(j,skills,txt)})).filter(j=>j.score>=min).forEach(j=>{rows.push([j.id,j.title,j.company,j.location,j.score,j.skills.join('|'),j.desc]);});const blob=new Blob([rows.map(r=>r.join(',')).join('\\n')],{type:'text/csv'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='recommended_jobs.csv';a.click();});
    setTimeout(()=>{if(!resumeText.value)resumeText.value="Skills: JavaScript, HTML, CSS, Git, Node.js\\nExperience in building responsive websites.";skills=extractSkills(resumeText.value);renderSkills(skills);renderJobs();},300);
  </script>
</body>
</html>
